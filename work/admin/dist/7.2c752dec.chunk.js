(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{640:function(t,e,n){},641:function(t,e,n){var r;window,t.exports=(r=n(0),function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e){t.exports=r},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(8),o=n(9);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){t.exports=n(7)},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),a=n(2),i=n.n(a),s=n(3),c=n.n(s),l=n(4),u=n.n(l),f=n(5),d=n.n(f),p=n(0),h=n.n(p);n(11).polyfill();var m=function(t){function e(t){var n,r;return o()(this,e),(n=c()(this,u()(e).call(this,t))).state={id:n.props.id||"".concat((new Date).getTime(),"_").concat(Math.random().toFixed(4)),width:n.props.width||150,height:n.props.height||40,len:n.props.length||4,style:(r={position:"relative",backgroundColor:"#fff",overflow:"hidden",width:n.props.width?"".concat(n.props.width,"px"):"150px",height:n.props.height?"".concat(n.props.height,"px"):"40px",cursor:"pointer",verticalAlign:"middle",userSelect:"none"},n.props.style?Object.assign({},r,n.props.style):r),options:function(){var t={codes:["a","b","c","d","e","f","g","h","i","j","k","l","m","o","p","q","r","s","t","x","u","v","y","z","w","n","0","1","2","3","4","5","6","7","8","9"],fontSizeMin:22,fontSizeMax:26,colors:["#117cb3","#f47b06","#202890","#db1821","#b812c2"],fonts:["Times New Roman","Georgia","Serif","sans-serif","arial","tahoma","Hiragino Sans GB"],lines:8,lineColors:["#7999e1","#383838","#ec856d","#008888"],lineHeightMin:1,lineHeightMax:1,lineWidthMin:20,lineWidthMax:60};return n.props.options?Object.assign({},t,n.props.options):t}()},n}return d()(e,t),i()(e,[{key:"componentDidMount",value:function(){this.onDraw(this.props.value)}},{key:"componentDidUpdate",value:function(t){this.props.value!==t.value&&this.onDraw(this.props.value),this.props.width===t.width&&this.props.height===t.height&&this.props.style===t.style||this.setState({width:this.props.width||150,height:this.props.height||40,style:Object.assign({},this.state.style,{width:this.props.width?"".concat(this.props.width,"px"):"150px",height:this.props.height?"".concat(this.props.height,"px"):"40px"})})}},{key:"onClick",value:function(){this.props.value||this.onDraw(this.props.value),this.props.onClick&&this.props.onClick()}},{key:"codeCss",value:function(t,e){return["font-size:".concat(this.randint(this.state.options.fontSizeMin,this.state.options.fontSizeMax),"px"),"color:".concat(this.state.options.colors[this.randint(0,this.state.options.colors.length-1)]),"position: absolute","left:".concat(this.randint(t*e,t*e+t-t/2),"px"),"top:50%","transform:rotate(".concat(this.randint(-15,15),"deg) translateY(-50%)"),"-o-transform:rotate(".concat(this.randint(-15,15),"deg) translateY(-50%)"),"-ms-transform:rotate(".concat(this.randint(-15,15),"deg) translateY(-50%)"),"-moz-transform:rotate(".concat(this.randint(-15,15),"deg) translateY(-50%)"),"-webkit-transform:rotate(".concat(this.randint(-15,15),"deg) translateY(-50%)"),"font-family:".concat(this.state.options.fonts[this.randint(0,this.state.options.fonts.length-1)]),"font-weight:bold","z-index:2"].join(";")}},{key:"lineCss",value:function(){return["position: absolute","opacity:".concat(this.randint(3,8)/10),"width:".concat(this.randint(this.state.options.lineWidthMin,this.state.options.lineWidthMax),"px"),"height:".concat(this.randint(this.state.options.lineHeightMin,this.state.options.lineHeightMax),"px"),"background:".concat(this.state.options.lineColors[this.randint(0,this.state.options.lineColors.length-1)]),"left:".concat(this.randint(-this.state.options.lineWidthMin/2,this.state.width),"px"),"top:".concat(this.randint(0,this.state.height),"px"),"transform:rotate(".concat(this.randint(-30,30),"deg)"),"-o-transform:rotate(".concat(this.randint(-30,30),"deg)"),"-ms-transform:rotate(".concat(this.randint(-30,30),"deg)"),"-moz-transform:rotate(".concat(this.randint(-30,30),"deg)"),"-webkit-transform:rotate(".concat(this.randint(-30,30),"deg)"),"font-family:".concat(this.state.options.fonts[this.randint(0,this.state.options.fonts.length-1)]),"font-weight:".concat(this.randint(400,900))].join(";")}},{key:"onDraw",value:function(t){var e="",n=document.getElementById(this.state.id),r=/^http[s]*:\/\/|\.jpg$|\.png$|\.jpeg$|\.gif$|\.bmp$|\.webp$|^data:image/.test(t);if(n.innerHTML="",r){var o=document.createElement("img");return o.style.cssText=["display: block","max-width:100%","max-height:100%"].join(";"),o.src=t,n.appendChild(o),this.props.onChange&&this.props.onChange(null),null}for(var a=t?t.length:this.state.len,i=this.state.width/a/1.01,s=0;s<a;s++){var c=document.createElement("span");c.style.cssText=this.codeCss(i,s);var l=t?t[s]:this.state.options.codes[Math.round(Math.random()*(this.state.options.codes.length-1))];c.innerHTML=l,e="".concat(e).concat(l),n.appendChild(c)}for(var u=0;u<this.state.options.lines;u++){var f=document.createElement("div");f.style.cssText=this.lineCss(),n.appendChild(f)}return this.props.onChange&&this.props.onChange(e),e}},{key:"randint",value:function(t,e){var n=e-t+1,r=Math.random()*n+t;return Math.floor(r)}},{key:"render",value:function(){var t=this;return h.a.createElement("div",{id:this.state.id,style:this.state.style,className:this.props.className,onClick:function(){return t.onClick()}})}}]),e}(h.a.PureComponent);e.default=m},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";function r(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var a=Object.keys(Object(o)),i=0,s=a.length;i<s;i++){var c=a[i],l=Object.getOwnPropertyDescriptor(o,c);void 0!==l&&l.enumerable&&(n[c]=o[c])}}return n}t.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}}]))},642:function(t,e,n){},655:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(38),i=n(61),s=(n(640),n(641)),c=n.n(s),l=n(347),u=n.n(l),f=(n(342),n(344)),d=n.n(f),p=(n(343),n(158)),h=n.n(p),m=(n(159),n(353)),y=n.n(m),g=(n(355),n(3)),v=n.n(g),b=(n(59),{name:"user",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]}}),w=n(7),x=function(t,e){return r.createElement(w.a,Object.assign({},t,{ref:e,icon:b}))};x.displayName="UserOutlined";var S=r.forwardRef(x),j={name:"key",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]}},O=function(t,e){return r.createElement(w.a,Object.assign({},t,{ref:e,icon:j}))};O.displayName="KeyOutlined";var E=r.forwardRef(O),M=n(657);n(642);function k(t){var e=Object(r.useRef)(null),n=Object(r.useRef)({ctx:null,dots:[],width:0,height:0}),a=Object(r.useRef)(null);Object(M.a)((function(){return e.current&&(n.current.ctx=e.current.getContext("2d"),n.current&&n.current.ctx&&(n.current.ctx.strokeStyle="rgba(255,255,255,1)",n.current.width=e.current.clientWidth,n.current.height=e.current.clientHeight,e.current.width=n.current.width,e.current.height=n.current.height,s(t.row,t.col,n.current.width,n.current.height),l())),function(){a.current&&window.cancelAnimationFrame(a.current)}}));var i=function(t,e){return Math.random()*(e-t)+t},s=function(t,e,r,o){for(var a=o/(t-2),s=r/(e-2),c=0;c<t;c++)for(var l=0;l<e;l++){var u={x:l*s-s/2,y:c*a-a/2,sx:i(-a/2,a/2),sy:i(-s/2,s/2),dx:!!Math.round(i(0,1)),dy:!!Math.round(i(0,1)),color:i(20,70),dcolor:!!Math.round(i(0,1))};n.current.dots.push(u)}},c=Object(r.useCallback)((function(t,e,n,r,o,a){r.fillRect(0,0,o,a);for(var i=0;i<e;i++)for(var s=0;s<n-1;s++){var c=i*n+s,l=c+1,u=c+n,f=c-n+1;if(i<=e-2){r.beginPath(),r.moveTo(t[c].x+t[c].sx,t[c].y+t[c].sy),r.lineTo(t[l].x+t[l].sx,t[l].y+t[l].sy),r.lineTo(t[u].x+t[u].sx,t[u].y+t[u].sy),r.closePath();var d=Math.round((t[c].color+t[l].color+t[u].color)/3);r.fillStyle="rgb(6,"+Math.round(d/1.3)+","+d+")",r.fill()}if(i>0){r.beginPath(),r.moveTo(t[c].x+t[c].sx,t[c].y+t[c].sy),r.lineTo(t[l].x+t[l].sx,t[l].y+t[l].sy),r.lineTo(t[f].x+t[f].sx,t[f].y+t[f].sy),r.closePath();d=Math.round((t[c].color+t[l].color+t[f].color)/3);r.fillStyle="rgb(6, "+Math.round(d/1.3)+","+d+")",r.fill()}}}),[]),l=function(){var e=t.row,r=t.col,o=n.current.width,i=n.current.height,s=i/(e-2),u=o/(r-2);n.current.dots.forEach((function(t,e){t.dx?t.sx<u/3?t.sx+=.1:t.dx=!t.dx:t.sx>-u/3?t.sx-=.1:t.dx=!t.dx,t.dy?t.sy<s/3?t.sy+=.1:t.dy=!t.dy:t.sy>-s/3?t.sy-=.1:t.dy=!t.dy,t.dcolor?t.color<80?t.color+=.4:t.dcolor=!t.dcolor:t.color>20?t.color-=.4:t.dcolor=!t.dcolor})),c(n.current.dots,e,r,n.current.ctx,o,i),a.current=requestAnimationFrame(l)};return o.a.createElement("div",{className:"canvas-back"},o.a.createElement("canvas",{ref:e}))}var C=n(149),P=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((r=r.apply(t,e||[])).next())}))},I=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},z=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r};e.default=Object(a.b)((function(t){return{}}),(function(t){return{onLogin:t.app.onLogin,getRoleById:t.sys.getRoleById,getMenusById:t.sys.getMenusById,getPowerById:t.sys.getPowerById,setUserInfo:t.app.setUserInfo}}))((function(t){var e=this,n=u.a.useForm()[0],a=Object(r.useState)(!1),s=a[0],l=a[1],f=Object(r.useState)(!1),p=f[0],m=f[1],g=Object(r.useState)("00000"),b=g[0],w=g[1],x=Object(r.useState)(!1),j=x[0],O=x[1];Object(r.useEffect)((function(){var t,e,r=localStorage.getItem("userLoginInfo");if(r){var o=JSON.parse(r);m(!0),n.setFieldsValue({username:o.username,password:i.a.uncompile(o.password)})}r?null===(e=document.getElementById("vcode"))||void 0===e||e.focus():null===(t=document.getElementById("username"))||void 0===t||t.focus(),O(!0)}),[n]);var M=Object(r.useCallback)((function(n,r){return P(e,void 0,void 0,(function(){var e,o,a,i,s,c,l,u,f;return I(this,(function(d){switch(d.label){case 0:return e=null,o=[],a=[],i=[],[4,t.onLogin({username:n,password:r})];case 1:return(s=d.sent())&&200===s.status&&s.data?(e=s.data,[4,t.getRoleById({id:e.roles})]):[2,s];case 2:return(c=d.sent())&&200===c.status?(o=c.data.filter((function(t){return 1===t.conditions})),l=o.reduce((function(t,e){return z(t,e.menuAndPowers)}),[]),[4,t.getMenusById({id:Array.from(new Set(l.map((function(t){return t.menuId}))))})]):[2,c];case 3:return(u=d.sent())&&200===u.status?(a=u.data.filter((function(t){return 1===t.conditions})),[4,t.getPowerById({id:Array.from(new Set(l.reduce((function(t,e){return z(t,e.powers)}),[])))})]):[2,u];case 4:return(f=d.sent())&&200===f.status?(i=f.data.filter((function(t){return 1===t.conditions})),[2,{status:200,data:{userBasicInfo:e,roles:o,menus:a,powers:i}}]):[2,f]}}))}))}),[t]),B=function(){return P(e,void 0,void 0,(function(){var e,r,o;return I(this,(function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,n.validateFields()];case 1:return e=a.sent(),l(!0),[4,M(e.username,e.password)];case 2:return(r=a.sent())&&200===r.status?(v.a.success("登录成功"),p?localStorage.setItem("userLoginInfo",JSON.stringify({username:e.username,password:i.a.compile(e.password)})):localStorage.removeItem("userLoginInfo"),sessionStorage.setItem("userinfo",i.a.compile(JSON.stringify(r.data))),[4,t.setUserInfo(r.data)]):[3,4];case 3:return a.sent(),t.history.replace("/"),[3,5];case 4:v.a.error(null!==(o=null==r?void 0:r.message)&&void 0!==o?o:"登录失败"),l(!1),a.label=5;case 5:return[3,7];case 6:return a.sent(),[3,7];case 7:return[2]}}))}))};return o.a.createElement("div",{className:"page-login"},o.a.createElement("div",{className:"canvasBox"},o.a.createElement(k,{row:12,col:8})),o.a.createElement("div",{className:j?"loginBox show":"loginBox"},o.a.createElement(u.a,{form:n},o.a.createElement("div",{className:"title"},o.a.createElement("img",{src:C.a,alt:"logo"}),o.a.createElement("span",null,"React-Admin")),o.a.createElement("div",null,o.a.createElement(u.a.Item,{name:"username",rules:[{max:12,message:"最大长度为12位字符"},{required:!0,whitespace:!0,message:"请输入用户名"}]},o.a.createElement(d.a,{prefix:o.a.createElement(S,{style:{fontSize:13}}),size:"large",id:"username",placeholder:"admin/user",onPressEnter:B})),o.a.createElement(u.a.Item,{name:"password",rules:[{required:!0,message:"请输入密码"},{max:18,message:"最大长度18个字符"}]},o.a.createElement(d.a,{prefix:o.a.createElement(E,{style:{fontSize:13}}),size:"large",type:"password",placeholder:"123456/123456",onPressEnter:B})),o.a.createElement(u.a.Item,null,o.a.createElement(u.a.Item,{name:"vcode",noStyle:!0,rules:[function(){return{validator:function(t,e){var n=i.a.trim(e);return n?n.length>4?Promise.reject("验证码为4位字符"):n.toLowerCase()!==b.toLowerCase()?Promise.reject("验证码错误"):Promise.resolve():Promise.reject("请输入验证码")}}}]},o.a.createElement(d.a,{style:{width:"200px"},size:"large",id:"vcode",placeholder:"请输入验证码",onPressEnter:B})),o.a.createElement(c.a,{height:40,width:150,onChange:function(t){n.setFieldsValue({vcode:t}),w(t)},className:"vcode",options:{lines:16}})),o.a.createElement("div",{style:{lineHeight:"40px"}},o.a.createElement(y.a,{className:"remember",checked:p,onChange:function(t){m(t.target.checked)}},"记住密码"),o.a.createElement(h.a,{className:"submit-btn",size:"large",type:"primary",loading:s,onClick:B},s?"请稍后":"登录"))))))}))}}]);